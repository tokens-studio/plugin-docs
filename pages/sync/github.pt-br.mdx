# GitHub Sync

Armazenar tokens no GitHub faz muito sentido. √â um gestor de versionamento muito popular, permite que voc√™ trabalhe em diferentes contextos do seu design (em *Branchs* diferentes, por exemplo) (pense em uma atualiza√ß√£o de marca que est√° em um *branch* diferente da vers√£o no ar) e oferece v√°rios n√≠veis de acesso, como acesso de leitura ou grava√ß√£o. Al√©m disso, voc√™ pode integrar as a√ß√µes do GitHub, que permitir√£o criar um pipeline de tokens com o *Style Dictionary* ou outras ferramentas similares.

---

import ReactPlayer from 'react-player'


<ReactPlayer
  muted
  playsinline
  width="100%"
  height="auto"
  loop
  playing
  controls
  url="/github-sync.mp4"
/>

import Callout from 'nextra-theme-docs/callout'

<Callout emoji="üí°">
  J√° tem uma conta GitHub com um reposit√≥rio? √ìtimo, pule para a etapa 3
</Callout>

### 1. Crie uma conta GitHub

V√° para https://github.com/signup e crie uma conta.

### 2. Crie um novo reposit√≥rio

Acesse https://github.com/new e crie um novo reposit√≥rio. D√™ a ele o nome que desejar, torne-o p√∫blico ou privado e inicialize-o com um README.

### 3. Gere seu token de acesso pessoal

V√° para a se√ß√£o *Personal Access Tokens" clicando [aqui](https://github.com/settings/tokens) ou clique em seu Avatar no canto superior direito, v√° para `Settings` > role para baixo at√© `Developer Settings`> [Personal Access Tokens](https://github.com/settings/tokens) e gere um novo token e selecione o escopo `repo`, decida por si mesmo quando esse token deve expirar. Role para baixo e clique em `Generate token`.

Copie esse token, voc√™ precisar√° dele logo mais e n√£o o ver√° novamente se fechar a p√°gina (salv√°-lo em um lugar como o Notion √© uma boa ideia para uso futuro).

Al√©m disso, nunca compartilhe este token com ningu√©m que n√£o deveria ter acesso ao seu reposit√≥rio. O token que compartilhei no v√≠deo acima j√° foi exclu√≠do, trate seu token como sua senha pessoal.

### 4. Adicione uma nova sincroniza√ß√£o do GitHub ao seu arquivo de tokens

V√° para a guia Sincronizar e selecione GitHub. Adicionar um novo item

- Adicione qualquer nome (usado apenas para a UI do plugin para identificar seu Token)
- Adicione seu token de acesso pessoal que acabamos de copiar
- Adicione seu reposit√≥rio GitHub (e.g. `tokens-studio/figma-plugin`)
- Adicione seu branch padr√£o (provavelmente `main`)
- Especifique um caminho de arquivo onde seus tokens devem ser armazenados, tal como `data/tokens.json` ou apenas `tokens.json`

### 5. Envie seu conjunto inicial de tokens

O plug-in agora solicitar√° que voc√™ envie seus tokens armazenados para o reposit√≥rio.

Adicione uma mensagem de confirma√ß√£o (*Commit*), por exemplo "Confirma√ß√£o inicial".

Se voc√™ estiver adicionando um reposit√≥rio que j√° cont√©m tokens, o plug-in perguntar√° se voc√™ deseja obter os tokens mais recentes. Isso substituir√° seus tokens armazenados localmente, portanto, certifique-se de fazer backup deles se n√£o quiser que sejam removidos.

### 6. Empurre ou puxe as altera√ß√µes

Sempre que voc√™ fizer uma altera√ß√£o no Tokens Studio for Figma, voc√™ deve clicar manualmente em `Push to GitHub` para enviar suas altera√ß√µes locais para o remoto. Sempre que voc√™ fizer isso, dever√° fornecer uma mensagem de confirma√ß√£o (*Commit*). Voc√™ pode escolher o branch para o qual deseja enviar suas altera√ß√µes, para que possa apenas tentar novos tokens sem sobrescrever os atualmente ativos.

Se voc√™ deseja apenas obter as altera√ß√µes mais recentes, clique em `Pull from GitHub`. O plug-in avisar√° quando suas altera√ß√µes locais forem diferentes das armazenadas no controle remoto, mostrando um ponto azul.

### 7. Como usar tokens armazenados no GitHub em desenvolvimento?

Se voc√™ deseja usar seus tokens tamb√©m no desenvolvimento, h√° algumas etapas que voc√™ precisa seguir.

Os tokens que armazenamos no GitHub s√£o a fonte de verdade (*SSoT*) para o plug-in apenas. Ou seja, ele ainda cont√©m apelidos e qualquer matem√°tica que voc√™ possa ter usado que √© exclusiva para ele. Por√©m, ferramentas como o *Style Dictionary* n√£o funcionam com matem√°tica.

Portanto, precisamos de uma maneira de transformar nossos tokens em algo que o Dicion√°rio de Estilo possa ler.

Escrevi um pacote que faz exatamente isso: [Token Transformer](https://www.npmjs.com/package/token-transformer). Voc√™ ou seu desenvolvedor pode instalar executando `npm install token-transformer`.

Voc√™ pode ent√£o us√°-lo para gerar tokens para um JSON que pode ser lido pelo *Style Dictionary*, sem nenhum apelido, sem nenhuma matem√°tica.

Execute `node token-transformer tokens.json output.json` onde input.json √© o arquivo em que voc√™ armazenou seus tokens. Isso pegar√° seu arquivo JSON de entrada (que √© o arquivo que geramos a partir do Tokens Studio for Figma, deve corresponder ao que voc√™ inseriu nos detalhes de sincroniza√ß√£o) e enviar os tokens transformados para um output.json

Se voc√™ usar v√°rios conjuntos (*Sets*) de tokens, tamb√©m poder√° criar diferentes arquivos de tokens por combina√ß√£o de tema. Voc√™ pode fazer isso fornecendo par√¢metros adicionais de transformador de token: `node token-transformer data / tokens.json output.json global,dark` usar√° os conjuntos de token global e dark para gerar combina√ß√µes.

N√£o deseja incluir o conjunto global na sa√≠da, mas us√°-lo para resolver aliases? Forne√ßa outro par√¢metro como este e o transformador o excluir√° na sa√≠da: `node token-transformer tokens.json output.json global,dark global`


<Callout emoji="üí°">
  Exemplos

  Alguns reposit√≥rios de exemplo que utilizam Tokens Studio for Figma, token-transformer, Style Dictionary e GitHub Actions podem ser encontrados aqui:

  - [1 tema para vari√°veis css](https://github.com/tokens-studio/plugin-example-css)
  - [V√°rios temas para vari√°veis css](https://github.com/tokens-studio/plugin-example-multi)
  - [TailwindCSS com tema escuro e claro](https://github.com/tokens-studio/plugin-example-tailwindcss)
  
  Avise-me se voc√™ tiver outros exemplos que deseja compartilhar com a comunidade!
</Callout>
